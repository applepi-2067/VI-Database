


 



 
 
 <!DOCTYPE html>
<html>

<!-- Mirrored from code.google.com/p/navx-mxp/wiki/IMUClass by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jan 2015 22:40:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" >
 
 <meta name="ROBOTS" content="NOARCHIVE">
 
 <link rel="icon" type="image/vnd.microsoft.icon" href="https://ssl.gstatic.com/codesite/ph/images/phosting.ico">
 
 
 <link rel="canonical" href="IMUClass.html" />
 
 <script type="text/javascript">
 
 
 
 
 var codesite_token = null;
 
 
 var CS_env = {"relativeBaseUrl": "", "loggedInUserEmail": null, "assetVersionPath": "https://ssl.gstatic.com/codesite/ph/18133036155640238800", "projectHomeUrl": "/p/navx-mxp", "projectName": "navx-mxp", "domainName": null, "assetHostPath": "https://ssl.gstatic.com/codesite/ph", "profileUrl": null, "token": null};
 var _gaq = _gaq || [];
 _gaq.push(
 ['siteTracker._setAccount', 'UA-18071-1'],
 ['siteTracker._trackPageview']);
 
 _gaq.push(
 ['projectTracker._setAccount', 'UA-46776614-5'],
 ['projectTracker._trackPageview']);
 
 (function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
 
 </script>
 
 
 <title>IMUClass - 
 navx-mxp -
 
 
 navX MXP Open-source Robotics Navigation sensor - Google Project Hosting
 </title>
 <link type="text/css" rel="stylesheet" href="../../../../ssl.gstatic.com/codesite/ph/18133036155640238800/css/core.css">
 
 <link type="text/css" rel="stylesheet" href="../../../../ssl.gstatic.com/codesite/ph/18133036155640238800/css/ph_detail.css" >
 
 
 
 <link type="application/atom+xml" rel="alternate" href="https://code.google.com/feeds/p/navx-mxp/svnchanges/basic?path=/wiki/IMUClass.wiki">
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="https://ssl.gstatic.com/codesite/ph/18133036155640238800/css/d_ie.css" >
<![endif]-->
 <style type="text/css">
 .menuIcon.off { background: no-repeat url(../../../../ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -42px }
 .menuIcon.on { background: no-repeat url(../../../../ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -28px }
 .menuIcon.down { background: no-repeat url(../../../../ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 0; }
 
 
 #maincol {
 padding-top: 0;
 padding-bottom: 0;
 }

 
 </style>
</head>
<body class="t6">
<script type="text/javascript">
 window.___gcfg = {lang: 'en'};
 (function() 
 {var po = document.createElement("script");
 po.type = "text/javascript"; po.async = true;po.src = "../../../../apis.google.com/js/plusone.js";
 var s = document.getElementsByTagName("script")[0];
 s.parentNode.insertBefore(po, s);
 })();
</script>
<div class="headbg">

 <div id="gaia">
 

 <span>
 
 
 <a href="#" id="projects-dropdown" onclick="return false;"><u>My favorites</u> <small>&#9660;</small></a>
 | <a href="https://www.google.com/accounts/ServiceLogin?service=code&amp;ltmpl=phosting&amp;continue=https%3A%2F%2Fcode.google.com%2Fp%2Fnavx-mxp%2Fwiki%2FIMUClass&amp;followup=https%3A%2F%2Fcode.google.com%2Fp%2Fnavx-mxp%2Fwiki%2FIMUClass" onclick="_CS_click('/gb/ph/signin');"><u>Sign in</u></a>
 
 </span>

 </div>

 <div class="gbh" style="left: 0pt;"></div>
 <div class="gbh" style="right: 0pt;"></div>
 
 
 <div style="height: 1px"></div>
<!--[if lte IE 7]>
<div style="text-align:center;">
Your version of Internet Explorer is not supported. Try a browser that
contributes to open source, such as <a href="http://www.firefox.com">Firefox</a>,
<a href="http://www.google.com/chrome">Google Chrome</a>, or
<a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>.
</div>
<![endif]-->



 <table style="padding:0px; margin: 0px 0px 10px 0px; width:100%" cellpadding="0" cellspacing="0"
 itemscope itemtype="http://schema.org/CreativeWork">
 <tr style="height: 58px;">
 
 
 
 <td id="plogo">
 <link itemprop="url" href="https://code.google.com/p/navx-mxp">
 <a href="https://code.google.com/p/navx-mxp/">
 
 
 <img src="https://code.google.com/p/navx-mxp/logo?cct=1417555830"
 alt="Logo" itemprop="image">
 
 </a>
 </td>
 
 <td style="padding-left: 0.5em">
 
 <div id="pname">
 <a href="https://code.google.com/p/navx-mxp/"><span itemprop="name">navx-mxp</span></a>
 </div>
 
 <div id="psum">
 <a id="project_summary_link"
 href="https://code.google.com/p/navx-mxp/"><span itemprop="description">navX MXP Open-source Robotics Navigation sensor</span></a>
 
 </div>
 
 
 </td>
 <td style="white-space:nowrap;text-align:right; vertical-align:bottom;">
 
 <form action="https://code.google.com/hosting/search">
 <input size="30" name="q" value="" type="text">
 
 <input type="submit" name="projectsearch" value="Search projects" >
 </form>
 
 </tr>
 </table>

</div>

 
<div id="mt" class="gtb"> 
 <a href="https://code.google.com/p/navx-mxp/" class="tab ">Project&nbsp;Home</a>
 
 
 
 
 
 
 <a href="TableOfContents9f2d.html?tm=6" class="tab active">Wiki</a>
 
 
 
 
 
 <a href="https://code.google.com/p/navx-mxp/issues/list"
 class="tab ">Issues</a>
 
 
 
 
 
 <a href="https://code.google.com/p/navx-mxp/source/checkout"
 class="tab ">Source</a>
 
 
 
 
 
 
 
 
 <div class=gtbc></div>
</div>
<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0" class="st">
 <tr>
 
 
 
 <td class="subt">
 <div class="issueDetail">
<div class="isf">
 
 <span class="inIssueList"> 
 <span>Search</span>
 <form action="https://code.google.com/p/navx-mxp/w/list" method="GET" style="display:inline">
 <select id="can" name="can" >
 <option disabled="disabled">Search within:</option>
 
 <option value="1" >&nbsp;All wiki pages</option>
 <option value="3" >&nbsp;Featured pages</option>
 <option value="2" selected="selected">&nbsp;Current pages</option>
 
 
 <option value="4" >&nbsp;Deprecated pages</option>
 
 </select>
 <span>for</span>
 <span id="qq"><input type="text" size="38" id="searchq" name="q" value=""
 autocomplete="off" ></span>
 
 
 
 <input type="submit" value="Search" >
 </form>
 </span>

 
 
 
 
 
 
 

</div>
</div>

 </td>
 
 
 
 
 
 
 <td align="right" valign="top" class="bevel-right"></td>
 </tr>
</table>


<script type="text/javascript">
 var cancelBubble = false;
 function _go(url) { document.location = url; }
</script>
<div id="maincol"
 
 
 style="padding:0 3px 3px 0; margin:0"
 
 
>

 






 
<style type="text/css">
 #wikimaincol { padding-top: 6px; padding-left:1em}
 #sidebarcontainer {
 padding: 1.5em 2px 2px 2px;
 min-width: 15em;
 max-width: 20em;
 overflow:hidden;
}
 .sidebartop ul { margin:0 0 0 .5em; padding-left:0 !important; list-style:none}
 .sidebartop ul ul { margin-left:1em; padding-left:0; list-style:none; display:none}
 .sidebartop li { margin:0 0 2px 0; padding:1px; padding-left:14px; cursor:pointer}
 .sidebartop li a { padding:2px}
 .sidebartop li { background: url(../../../../ssl.gstatic.com/codesite/ph/images/plus.gif) no-repeat 1px 3px}
 .sidebartop li.treeopen { background: url(../../../../ssl.gstatic.com/codesite/ph/images/minus.gif) no-repeat 1px 3px}
 .sidebartop li.treeleaf { background:none}
 .currentpagelink { 
 font-weight: bold;
 text-decoration: none;
 color: black !important; 
 background: #c3d9ff;
 }
 .sidebartop ul.treeleafcontainer { display:block;}
 .sidebarcontent { 
 vertical-align:top;
 padding-right: 3px;
 border-right: 2px solid #ccc;
 }
</style>



 <style type="text/css">
 .delcom { background: #e8e8e8 }
 .commentcontent {
 margin: 2em;
 padding: 0px 10px;
 width: 66em;
 }
 .artifactcomment {
 border-top: 3px solid #c3d9ff;
 }
 #commentform {
 border-top: 3px solid #c3d9ff;
 }
 </style>

<div id="wikipage">
<table>
 <tr>
 
 
 <td class="sidebarcontent">
 <div class="vt expand" id="wikisidebar">
 <div>
 
 <div style="float:right;">
 <a class="ifExpand" style="font-size:130%; color:blue; text-decoration:none"
 href="#" onclick="_DW_toggleSidebar(this); return false;"
 title="Hide sidebar"><b>&lsaquo;&lsaquo;</b></a>
 </div>
 <div class="ifCollapse" style="padding:0 2px">
 <a style="font-size:130%; color:blue; text-decoration:none"
 href="#" onclick="_DW_toggleSidebar(this); return false;"
 title="Show sidebar"><b>&rsaquo;&rsaquo;</b></a>
 </div>
 
 
 <div id="sidebarcontainer" class="sidebartop ifExpand">
 <p><strong> Getting Started </strong></p><ul><li><a href="Purchasing.html" rel="nofollow">Where to Buy</a> </li></ul><ul><li><a href="http://kauailabs.com/wp-content/uploads/2014/12/navX_MXP_Datasheet.pdf" rel="nofollow">Datasheet</a> </li></ul><ul><li><a href="FAQ.html">Frequently Asked Questions</a> </li></ul><ul><li><a href="RoboRioInstall.html">Plug-n-Play Installation</a> </li></ul><ul><li><a href="MXPIOExpansion.html">I/O Expansion</a> </li></ul><ul><li><a href="Orientation.html">Orientation</a> </li></ul><ul><li><a href="AdvancedInstallOptions.html">Alternative Installation Options</a> </li></ul><ul><li><a href="GyroAccelCalibration.html">Gyro/Accelerometer Calibration</a> </li></ul><ul><li><a href="Calibration.html">Magnetometer Calibration</a> </li></ul><ul><li><a href="navXMXPUI.html">The navX MXP UI</a> </li></ul><ul><li><a href="Enclosure.html">Creating an Enclosure</a> </li></ul><ul><li><a href="Acknowledgements.html">Acknowledgements</a> </li></ul><p><strong> FRC Software Libraries </strong></p><ul><li><a href="CPlusPlus.html">C++</a> </li></ul><ul><li><a href="Java.html">Java</a> </li></ul><ul><li><a href="Labview.html">Labview</a> </li></ul><ul><li><a href="IMUClass.html">The IMU class</a> </li></ul><ul><li><a href="IMUAdvanced.html">The IMUAdvanced class</a> </li></ul><p><strong> Application Examples </strong></p><ul><li><a href="FieldOrientedDrive.html" rel="nofollow">Field-oriented Drive</a> </li></ul><ul><li><a href="AutoBalancingExample.html">Automatic Balancing</a> </li></ul><ul><li><a href="RotateToAngleExample.html">Rotating to a given Angle</a> </li></ul><ul><li><a href="MotionDetection.html">Motion/No-Motion Detection</a> </li></ul><p><strong> Customization and Troubleshooting </strong></p><ul><li><a href="FirmwareInstallation.html">Firmware Installation</a> </li></ul><ul><li><a href="Troubleshooting.html">Troubleshooting</a> </li></ul><ul><li><a href="FactoryTestProcedure.html" rel="nofollow">Factory Test Procedure</a> </li></ul><ul><li><a href="Support.html">Support</a> </li></ul><p><strong> Advanced Topics </strong></p><ul><li><a href="Specifications.html">Specifications</a> </li></ul><ul><li><a href="SerialProtocolBasic.html">Serial Protocol (Basic)</a> </li></ul><ul><li><a href="https://code.google.com/p/navx/wiki/YawDrift" rel="nofollow">Yaw Drift</a> </li></ul><ul><li><a href="SerialProtocolAdvanced.html">Serial Protocol (Advanced)</a> </li></ul><ul><li><a href="I2C_SPI_Protocols.html">I2C/SPI Protocols</a> </li></ul><ul><li>Advanced Configuration </li></ul><ul><li><a href="References.html">References</a> </li></ul><p><strong> For the Adventurous </strong></p><ul><li><a href="FirmwareCustomization.html">Firmware Customization</a> </li></ul>
 </div>
 </div>
</div>

 </td>
 
 <td style="vertical-align:top; padding-left:5px">
 
 <div id="wikiheader">
 
 <span style="font-size:120%;font-weight:bold">IMUClass</span>
 &nbsp;
 <div> 
 
 
 
 <div id="wikiauthor" style="float:right">
 Updated <span title="Sat Jan  3 22:33:52 2015">
 Jan 3, 2015</span>
 
 by 

 <a class="userlink"
 href="https://code.google.com/u/104705105116845524465/">scottlib...@gmail.com</a
>
 
 </div>
 </div>
 </div>
 
 <div id="wikicontent">
 <div class="vt" id="wikimaincol">
 <p>To integrate the navX MXP into RoboRIO-based robot control software, source code for a <a href="https://code.google.com/p/nav6/source/browse/#svn%2Ftrunk%2Fcrio%2Fc%2B%2B%2Fnav6SimpleRobotExample%253Fstate%253Dclosed" rel="nofollow">C++</a> and a <a href="https://code.google.com/p/navx-mxp/source/browse/#svn%2Ftrunk%2Froborio%2Fjava" rel="nofollow">Java</a> class named <strong>IMU</strong>, which is based upon the WPI Library, is provided. </p><p><strong>You can either choose to <a href="https://code.google.com/p/navx-mxp/source/checkout" rel="nofollow">checkout</a> the source code with subversion, or you can choose to download the <a href="https://navx-mxp.googlecode.com/svn/trunk/navx-mxp.zip" rel="nofollow">latest build</a> of the libraries.</strong> </p><p><i>Note:  the example code on this page demonstrates using the C++ version of the IMU class, however the Java version is identical, except that the first word of each Java class method is lower case.</i> </p><p><i>Note:  if you need access to advanced features enabled by the navX MXP IMU, such as access to the raw sensor data, world linear acceleration with gravity removed, motion/no-motion detection and access to the sensors temperature data, you can use the IMUAdvanced class instead of the IMU class.</i> </p><h1><a name="Instantiating_an_IMU_object"></a>Instantiating an IMU object<a href="#Instantiating_an_IMU_object" class="section_anchor"></a></h1><p>To instantiate an IMU object, the IMU constructor must be invoked and provided a pointer to an instance of the WPI Library <strong>SerialPort</strong> class. </p><p>You can specify either the MXP TTL UART Serial Port (SerialPort::kMXP) or the USB Virtual Serial Port (SerialPort::kUSB), depending upon how you have installed the navX MXP onto your RoboRIO. </p><pre class="prettyprint">    // Instantiate Serial Port object

    // Serial settings are:
    // - Baud Rate:  57600
    // - Data Bits:  8
    // - Stop Bits:  1
    // - Parity:     None

    SerialPort *imu_serial_port = new SerialPort(SerialPort::kMXP, 57600);

    // Instantiate IMU object

    short update_rate_hz = 50; // valid values:  4-60
    IMU *imu = new IMU(imu_serial_port, update_rate_hz);

    // Add the IMU to the Live Window
    // Since the IMU inherits from LiveWindowSendable,
    // the live window will automatically be updated with
    // the current Yaw angle

    lw-&gt;AddSensor(&quot;DriveSystem&quot;, &quot;Gyro&quot;, imu);
</pre><h1><a name="Verifying_Communication"></a>Verifying Communication<a href="#Verifying_Communication" class="section_anchor"></a></h1><p>Several methods are provided to help verify proper communication with the nav6 IMU: </p><blockquote>IMU::IsConnected() - indicates whether data is successfully being received from the IMU.  Given the default update rate of 100Hz, the IMU::IsConnected() method should return true within about 10 ms after the IMU object is instantiated. 
</blockquote><blockquote>IMU::GetUpdateCount() - can be used to determine if new yaw/pitch/roll values have been received from the nav6 IMU since the last time this method was invoked.  Given the default update rate of 100Hz, the value returned from IMU::GetUpdatedCount() should increment once every 10 milliseconds. 
</blockquote><blockquote>IMU::GetByteCount() - can be used to determine if any bytes are being received over the SerialPort from the nav6.  The value returned from IMU::GetByteCount() indicates the number of bytes received over the serial port since the IMU object was instantiated. 
</blockquote><h1><a name="Calibration_State"></a>Calibration State<a href="#Calibration_State" class="section_anchor"></a></h1><blockquote>IMU::IsCalibrating() - if this function returns true, the nav6 IMU is performing a gyroscope/accelerometer/magnetometer calibration procedure.  This procedure take 20 seconds, and begins when power is applied to the navX MXP.  During this time, the navX MXP should be still.  At the end of the calibration period, the navX MXP computes a yaw offset which is used until the navX MXP is powered on again. 
</blockquote><h1><a name="Accessing_Yaw,_Pitch,_Roll_and_Compass_Heading_values"></a>Accessing Yaw, Pitch, Roll and Compass Heading values<a href="#Accessing_Yaw,_Pitch,_Roll_and_Compass_Heading_values" class="section_anchor"></a></h1><p>Four methods are provided to access the most recent Yaw, Pitch, Roll and Compass Heading values from the navX MXP IMU: </p><ul><li>IMU::GetYaw() </li><li>IMU::GetPitch() </li><li>IMU::GetRoll() </li></ul><blockquote>These methods return the latest angle from the Digital Motion Processor (DMP).  The returned value is a floating point number from -180.0 to 180.0. 
</blockquote><ul><li>IMU::GetCompassHeading() </li></ul><blockquote>The GetCompassHeading() method returns the latest angle from the Magnetometer.  The returned value is a floating point number from 0 to 360. 
</blockquote><blockquote>Note that the Compass Heading value is meaningless unless Magnetometer <a href="Calibration.html">Calibration</a> has been performed. 
</blockquote><h1><a name="Zeroing_the_Yaw_Angle"></a>Zeroing the Yaw Angle<a href="#Zeroing_the_Yaw_Angle" class="section_anchor"></a></h1><p>To reset the yaw value to the current angle the navX MXP IMU is currently pointing, invoke the IMU::ZeroYaw() method.  Once invoked, the IMU::GetYaw() method will return 0 until the navX MXP is rotated, at which point the changes will be relative to the newly set &quot;zero&quot; heading. </p><h1><a name="Using_the_navX_MXP_IMU_data_for_PID_Control"></a>Using the navX MXP IMU data for PID Control<a href="#Using_the_navX_MXP_IMU_data_for_PID_Control" class="section_anchor"></a></h1><p>The IMU Class inherits from the WPI Library PIDSource class, and the current yaw angle is returned from the PIDGet() method.  By using the navX MXP IMU as a PID Source, software can be written that would, for instance, <a href="RotateToAngleExample.html">turn the robot to a particular angle</a>. </p><h1><a name="Viewing_navX_MXP_value/status_on_the_Smart_Dashboard"></a>Viewing navX MXP value/status on the Smart Dashboard<a href="#Viewing_navX_MXP_value/status_on_the_Smart_Dashboard" class="section_anchor"></a></h1><pre class="prettyprint">        // Display IMU Status

	bool imu_connected = imu-&gt;IsConnected();
	SmartDashboard::PutBoolean( &quot;IMU_Connected&quot;, imu_connected);
	SmartDashboard::PutNumber(&quot;IMU_Update_Count&quot;, imu-&gt;GetUpdateCount());
	SmartDashboard::PutNumber(&quot;IMU_Byte_Count&quot;, imu-&gt;GetByteCount());

        // Display IMU Values

	SmartDashboard::PutNumber(&quot;PitchAngle&quot;, imu-&gt;GetPitch());
	SmartDashboard::PutNumber(&quot;RollAngle&quot;, imu-&gt;GetRoll());</pre>
 </div>
 </div>
 </td><tr>
</table>
 </div>


 
 
 
 
 <br>
 <div class="artifactcomment">
 <span class="indicator">&#9658;</span> <a href="https://www.google.com/accounts/ServiceLogin?service=code&amp;ltmpl=phosting&amp;continue=https%3A%2F%2Fcode.google.com%2Fp%2Fnavx-mxp%2Fwiki%2FIMUClass&amp;followup=https%3A%2F%2Fcode.google.com%2Fp%2Fnavx-mxp%2Fwiki%2FIMUClass"
 >Sign in</a> to add a comment
 </div>
 
 
 
 
 <form name="delcom" action="https://code.google.com/p/navx-mxp/w/delComment.do" method="POST">
 <input type="hidden" name="sequence_num" value="" >
 <input type="hidden" name="create_time" value="" >
 <input type="hidden" name="mode" value="" >
 <input type="hidden" name="pagename" value="IMUClass" >
 <input type="hidden" name="token" value="" >
 </form>


 <script src="../../../../ssl.gstatic.com/codesite/ph/18133036155640238800/js/prettify/prettify.js"></script>
 <script type="text/javascript">
 prettyPrint();
 </script>

<script type="text/javascript" src="../../../../ssl.gstatic.com/codesite/ph/18133036155640238800/js/dit_scripts.js"></script>



  
 
 
 <script type="text/javascript" src="../../../../ssl.gstatic.com/codesite/ph/18133036155640238800/js/ph_core.js"></script>
 
 <script type="text/javascript" src="../../../../ssl.gstatic.com/codesite/ph/18133036155640238800/js/ph_dwiki.js"></script>
 
 
 
 
</div> 

<div id="footer" dir="ltr">
 <div class="text">
 <a href="https://code.google.com/projecthosting/terms.html">Terms</a> -
 <a href="http://www.google.com/privacy.html">Privacy</a> -
 <a href="https://code.google.com/p/support/">Project Hosting Help</a>
 </div>
</div>
 <div class="hostedBy" style="margin-top: -20px;">
 <span style="vertical-align: top;">Powered by <a href="http://code.google.com/projecthosting/">Google Project Hosting</a></span>
 </div>

 
 


 
 </body>

<!-- Mirrored from code.google.com/p/navx-mxp/wiki/IMUClass by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jan 2015 22:40:32 GMT -->
</html>


